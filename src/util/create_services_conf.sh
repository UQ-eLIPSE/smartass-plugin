#!/bin/bash

set -o errexit
set -o nounset

#+
#
#-

echo $0

#-------------------------------------------------------------------------------
#       . setup .
#-------------------------------------------------------------------------------

moddir='./build/classes/main//au/edu/uq/smartass/question'
output='./src/main/resources/META-INF/services/au.edu.uq.smartass.engine.QuestionModule'

msg='SERVICES: au.edu.uq.smartass.engine.QuestionModule'


#-------------------------------------------------------------------------------
#       . initialise .
#-------------------------------------------------------------------------------

outdir="${output%/*}"
if [[ ! -d "${outdir}" ]]; then mkdir -p "${outdir}"; fi


#-------------------------------------------------------------------------------
#       . main .
#-------------------------------------------------------------------------------

        printf '\n> > > > >  %s\n\n' "${msg}"

        find ${moddir} -type f -name *.class | 
        sed -e '{
                /\$/d
                /Abstract/d
                s|.*//||
                s|\.class||
                s|/|.|g
        }' | 
        tee "${output}"

        printf '\n< < < < <  %s\n\n' "${msg}"

#-------------------------------------------------------------------------------
#       . la fin .
#-------------------------------------------------------------------------------

exit 0;

